<!DOCTYPE HTML>
<html lang="en">
<head>
  <title>Convert Text to MD5</title>
  <link rel="stylesheet" type="text/css" href="test.css">
</head>
<body>
  <h1>Convert Text to MD5</h1>
  <input type="text" id="toMD5" placeholder="Enter text here...">
  <button onclick="dog()">Convert to MD5</button><br>
  <h2 class="test"></h2>
  <script>
    function dog() {
      let a = document.getElementById("toMD5").value
      let chars = []
      let constants = []
      let tbl = []
      let chunks = []
      let len_chunks = []
      let len_list = []
      let final = []
      let final2 = []
      for (let i = 0; i < 64; i++) {
        constants.push(Math.floor(2**32*Math.abs(Math.sin(i+1))).toString(16))
      }
      if (a) {
        for (let i = 0; i < a.length; i++) {
          chars.push(a.charCodeAt(i).toString(16))
        }
        chars.push("80")
        while (chars.length % 64 != 56) {
          chars.push("00")
        }
        let length_string = (a.length*8).toString(16)
        while (length_string.length != 16)
        {
          length_string = "0" + length_string
        }
        for (let x = 0; x < 16; x+=2) {
          tbl.push(length_string.slice(x,x+2))
        }
        for (item in tbl) {
          chars.push(tbl[item])
        }
        for (let i = 0; i < 56; i=i+4) {
          chunks.push(chars.splice(0,4))
        }
        for (let i = 0; i < 8; i=i+8) {
          len_chunks.push(chars.splice(0,8))
        }
        len_chunks=len_chunks[0].reverse()
        for (let i = 0; i < 8; i=i+4) {
          len_list.push(len_chunks.splice(0,4))
        }
        for (item in len_list) {
          chunks.push(len_list[item])
        }
        for (let item = 0; item < 16; item++) {
          let rlist = chunks[item].reverse()
          for (let x = 0; x < 4; x++) {
            final.push(rlist[x])
          }
        }
       let n=''
       let r=0
       for (item in final) {
        n+=final[item]
        r+=1
        if (r == 4) {
          final2.push(n)
          n=''
          r=0
        }
      }
      console.log(final2)
      let h1 = document.querySelector("h2.test")
      h1.textContent = a
    }
    else {
        console.log("No value")
      }
    }
    document.getElementById("toMD5").addEventListener("keydown", function(event) {
      if (event.key === "Enter") {
        dog()
      }
    })
  </script>
</body>
</html>
